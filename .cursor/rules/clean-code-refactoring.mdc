---
description: 在进行代码重构时必须进行完整的代码清理和自测，确保不留冗余代码
globs: ["**/*.py"]
alwaysApply: true
priority: 90
---
# 重构代码清理

在进行代码重构时必须进行完整的代码清理和自测，确保不留冗余代码。

## 强制删除旧代码
- **重要**: 移动或重构功能后，必须立即删除旧文件和旧代码，不允许保留冗余实现
- 所有迁移到新文件的代码，必须完全删除原始文件
- 代码重构完成后，必须确认所有旧实现已被删除，不得遗留
- 任何重构操作必须包含"删除旧文件"作为必要步骤，这是不可省略的

## 重构步骤
1. 全文搜索找出所有对旧代码的引用
2. 设计重构方案，确保架构合理性
3. 实现新功能，保持与原有功能一致
4. 逐步更新引用点，指向新实现
5. 验证功能完整性
6. **删除旧代码文件** - 这是必须完成的步骤

## 清理检查清单
- 移除不再使用的导入语句
- 删除无引用的旧代码文件
- 清理空目录
- 移除注释掉的旧代码
- 确保测试覆盖重构的功能

## 文件引用检测
- 使用grep搜索所有引用旧文件或旧类的地方
- 检查是否有任何导入指向已删除的文件
- 运行静态代码分析工具检查未使用的导入

## 文件参考
- @src/core/base/
- @src/web/
- @tests/